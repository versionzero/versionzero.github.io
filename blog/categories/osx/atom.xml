<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Osx | Pre-Released Ideas]]></title>
  <link href="http://versionzero.github.io/blog/categories/osx/atom.xml" rel="self"/>
  <link href="http://versionzero.github.io/"/>
  <updated>2015-01-12T07:26:39-08:00</updated>
  <id>http://versionzero.github.io/</id>
  <author>
    <name><![CDATA[Ben Burnett]]></name>
    <email><![CDATA[yeah@right.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[My Karabiner private.xml]]></title>
    <link href="http://versionzero.github.io/blog/2015/01/11/karabiner-private-xml/"/>
    <updated>2015-01-11T08:41:00-08:00</updated>
    <id>http://versionzero.github.io/blog/2015/01/11/karabiner-private-xml</id>
    <content type="html"><![CDATA[<p>Over the years, through school and other areas, I became addicted to
both Emacs and my Mac. Unfortunately, as both evolved, they became less
and less friendly with each other.</p>

<!--more-->


<p>One thing in particular bothers me about their interaction: the
keyboard. It used to be I could use Ctrl+Left/Right arrow to skip an
Emacs defined &ldquo;word&rdquo;; however, this became the way for Mac users to
switch spaces. This is when I found Karabiner. I now use Karabiner to
change the purpose of the Fn key so that I can use it and the arrow
keys to switch spaces, but also maintain the ability to skip around in
Emacs by words, instead of simply by character or paragraph.</p>

<p>Here is my private.xml for this particular use case:</p>

<p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="ni">&amp;lt;</span>?xml version=<span class="ni">&amp;ldquo;</span>1.0<span class="ni">&amp;rdquo;</span>?&gt;
<span class="nt">&lt;root&gt;</span>
    <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;name&gt;</span>My Spaces (I like to use Fn+Left/Right arrow for switching spaces)<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;appendix&gt;</span>Change Fn to Ctrl+Option+Command<span class="nt">&lt;/appendix&gt;</span>
        <span class="nt">&lt;identifier&gt;</span>private.fn_control_option_command_hyper<span class="nt">&lt;/identifier&gt;</span>
        <span class="nt">&lt;autogen&gt;&lt;strong&gt;</span>KeyToKey<span class="nt">&lt;/strong&gt;</span> KeyCode::FN, KeyCode::COMMAND_L, ModifierFlag::OPTION_L, ModifierFlag::CONTROL_L<span class="nt">&lt;/autogen&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/root&gt;</span></code></pre></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Streaming From iPhone to iPhone]]></title>
    <link href="http://versionzero.github.io/blog/2015/01/03/streaming-from-iphone-to-iphone/"/>
    <updated>2015-01-03T07:11:00-08:00</updated>
    <id>http://versionzero.github.io/blog/2015/01/03/streaming-from-iphone-to-iphone</id>
    <content type="html"><![CDATA[<p>Part of this project includes code, not just writing. Obviously, the
code to the site is available, but what follows is code that is
independent of the site, in so far as it doesn&rsquo;t help run it. The code
itself is hosted on another GitHub account, for my own reasons, but
the writeups will all be here.</p>

<!--more-->


<h3>Streaming to iOS Devices</h3>

<p>The first question that comes to mind is why? Why would you want to
stream to an iOS device rather than just from it?</p>

<p>The answer reveals how fortunate (spoiled) I&rsquo;ve been over the past few
years: I&rsquo;ve always been a technology enthusiast and I have always been
one to try to keep somewhat up-to-date on the latest gadgets. In some
respects, this has meloed over the years, but it hasn&rsquo;t stopped me
from buying a new previous generation iPhone every time a new one is
released. In this case, it means I am currently an owner of a 5s and
4s, as I have not gotten rid of the 4s yet. This is all relevant
because it lead me to this question: what can I do with an old iPhone
that I might not be able to do with a computer. It turns out, there is
a lot you can use an old iPhone for, much of which is not relevant,
except streaming.</p>

<p>I used my iPhone 4s as a remote and as a Netflix source to stream to
my TVs. The novelty of this quickly wore off, so I started looking
around for other uses. This is when I realized I&rsquo;d like to install it
in my car and stream to it, from another source. I have an iOS dock in
my car. Not one that connects to an existing stereo or cables, but is
instead a stereo designed to hold an iOS device internally (or a USB
drive, etc.). The idea for device reuse or specialized use would be to
allow to stream from one device to another. In my case, one iPhone to
another. This way, the music, etc. is on one device, but the output is
on another. This would make updating music and listening to it on the
car iPhone trivial, as the device would never need to have updated
manually, or if it did, it wouldn&rsquo;t be critical that be sync&rsquo;d every
night or even week. (Yes, a &ldquo;first world problem&rdquo; (FWP), but hey, most
technology fixes FWP these days&mdash;doesn&rsquo;t it? Not many Pinterest users
bragging about the bag of support rice they had dropped on their
head. Or maybe there are.)</p>

<h3>How to Stream</h3>

<p>Since we are writing an open source project, we can use a bunch of
open source libraries and tools. For the base streaming part, I&rsquo;ve
chosen to use <a href="https://github.com/abrasive/shairport">shairport</a>;
unfortunately, it does not support iOS out of the box, so we need to
make some modifications&mdash;which is actually a good thing: otherwise,
we&rsquo;d be done with the writing, right about now.</p>

<p><em>In progress</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mac OS Gets Cilk++ Support via Clang and LLVM]]></title>
    <link href="http://versionzero.github.io/blog/2013/03/24/mac-os-gets-cilk-plus-plus-support-via-clang-and-llvm/"/>
    <updated>2013-03-24T17:35:00-07:00</updated>
    <id>http://versionzero.github.io/blog/2013/03/24/mac-os-gets-cilk-plus-plus-support-via-clang-and-llvm</id>
    <content type="html"><![CDATA[<p>Part of my yet un-finished graduate work involved using a combination
of threading and cache-oblivious algorithms to improve the performance
of various linear algebra computations on sparse data sets.  During
the course of my work, I used a few concurrency models, including
Intel&rsquo;s <a href="http://cilkplus.org">Cilk Plus</a> data and task parallelism
techniques.</p>

<p>Recently, the <a href="http://cilkplus.github.com">Cilk Plus language extensions were introduced to the Clang frontend for LLVM</a>.  Which mean it
was available on Darwin.  Though the <a href="http://gcc.gnu.org/svn/gcc/branches/cilkplus/">Cilk Plus extensions and runtime have been available in GCC</a> for some time,
building the GCC code on Darwin proved to be non-trivial. (For me, at
least&mdash; the Linux build was far easier.)  The introduction of Cilk
Plus in Clang allows for easy compilation and use on the Darwin
platform.</p>

<!--more-->


<p>I used the instructions given on the new <a href="http://cilkplus.github.com">Cilk Plus/LLVM GitHub site</a>
to try a copy of the compiler on my local machine.</p>

<p>The current implementation only provides support for a subset of the
Cilk Plus language extensions: <code>cilk_spawn</code>, <code>cilk_sync</code>, and
<code>hyperobjects</code>.  Leaving features like <code>cilk_for</code>, array notation and
SIMD work for future releases.  Despite the not providing a full
feature-set, the Cilk Plus/LLVM tools can already be used to make
non-trivial parallel programs.</p>

<p>I dusted off some benchmarking code I used for previous experiments
and gave it a go on my laptop.  While not a high-performance big-steel
machine, my laptop does weigh in well with 16GB of RAM and a quad-core
Intel i7.</p>

<p>The code I ran uses a well-known matrix multiplication algorithm&mdash;
<a href="http://en.wikipedia.org/wiki/Strassen_algorithm">Strassen&rsquo;s algorithm</a>&mdash;to
create large parallel workloads.  The code was based on example code
shipped with the original 1996 <a href="http://supertech.csail.mit.edu/cilk/">MIT Cilk language and runtime</a>.  I modified the code
slightly to include the new language extensions as well as to provide
slightly more performance information. (I&rsquo;ll post the changes
shortly.)</p>

<p>I ran the code through a variety of benchmarks, which I&rsquo;ve included
bellow.</p>

<p><img src="/images/speed-up.png" title="Speedup of Strassen's Algorithm with
 Cilk Plus/LLVM" alt="speedup" /></p>

<p>The legend labels describe the size of the matrices being used.  For
instance, 1024 mean that Strassen&rsquo;s Algorithm is being run using
inputs of size 1024 by 1024.  Notice we don&rsquo;t achieve linear
<a href="http://en.wikipedia.org/wiki/Speedup">speedup</a>, but we do get very
close.  I think with a little extra fine tuning (1) and the explicit
use of some SIMD instructions, near-linear speedup could be
achieved. If you want the data, you can get it
<a href="/files/llvmcilk-results.xlsx">here</a>.</p>

<ol>
<li>Yes, I know: cache oblivious algorithms aren&rsquo;t <em>supposed</em> to
require tuning.  In practice, unfortunately, they do.  Maybe not as
much tuning as their cache aware brethren, but still the require some.
Even the original MIT code had some tuning code in it, so I&rsquo;m not
alone in thinking it necessary.</li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Locking Down Darwin]]></title>
    <link href="http://versionzero.github.io/blog/2012/08/20/locking-down-darwin/"/>
    <updated>2012-08-20T20:42:00-07:00</updated>
    <id>http://versionzero.github.io/blog/2012/08/20/locking-down-darwin</id>
    <content type="html"><![CDATA[<p>Darwin/OS X ships with some fairly permissive settings on some fairly
dangerous tools. Which this needs a whole lot more work, the following
script does a good job of securing a basic Darwin/OS X installation.</p>

<!--more-->


<p><div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">if</span> <span class="o">[</span> <span class="p">&amp;</span>ldquo<span class="p">;</span>root<span class="p">&amp;</span>rdquo<span class="p">;</span> !<span class="o">=</span> &lt;code&gt;whoami&lt;/code&gt; <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="p">&amp;</span>ldquo<span class="p">;</span>Must be root!<span class="p">&amp;</span>rdquo<span class="p">;</span> 2&gt;/dev/null
    <span class="nb">exit </span>1
<span class="k">fi</span>&lt;/p&gt;

&lt;h1&gt;#&lt;/h1&gt;

&lt;h1&gt;Allow only root to run <span class="p">&amp;</span>ldquo<span class="p">;</span>at<span class="p">&amp;</span>rdquo<span class="p">;</span> and <span class="p">&amp;</span>ldquo<span class="p">;</span>cron<span class="p">&amp;</span>rdquo<span class="p">;</span>&lt;/h1&gt;

&lt;h1&gt;#&lt;/h1&gt;

&lt;p&gt;rm -f /var/at/at.deny 2&gt;/dev/null
rm -f /var/cron/deny 2&gt;/dev/null
<span class="nb">echo</span> <span class="p">&amp;</span>ldquo<span class="p">;</span>root<span class="p">&amp;</span>rdquo<span class="p">;</span> &gt;/var/at/at.allow&lt;/p&gt;

&lt;h1&gt;echo <span class="p">&amp;</span>ldquo<span class="p">;</span>root<span class="p">&amp;</span>rdquo<span class="p">;</span> &gt;/var/cron/allow&lt;/h1&gt;

&lt;h1&gt;#&lt;/h1&gt;

&lt;h1&gt;Set some sane permissions&lt;/h1&gt;

&lt;h1&gt;#&lt;/h1&gt;

&lt;p&gt;function _chmod <span class="o">()</span> <span class="o">{</span>
    chmod <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">$@</span><span class="p">&amp;</span>rdquo<span class="p">;</span> 1&gt;/dev/null 2&gt;<span class="p">&amp;</span>amp<span class="p">;</span>1
<span class="o">}</span>&lt;/p&gt;

&lt;p&gt;&lt;em&gt;chmod <span class="m">600</span> /etc/cron*
&lt;/em&gt;chmod <span class="m">600</span> /var/cron/deny
&lt;em&gt;chmod <span class="m">600</span> /var/cron/allow
&lt;/em&gt;chmod <span class="m">600</span> /etc/ftpusers
&lt;em&gt;chmod <span class="m">600</span> /etc/inetd.conf
&lt;/em&gt;chmod <span class="m">600</span> /etc/syslog.conf&lt;/p&gt;

&lt;p&gt;&lt;em&gt;chmod <span class="m">750</span> /sbin/dumpfs
&lt;/em&gt;chmod <span class="m">750</span> /usr/sbin/fdisk
&lt;em&gt;chmod <span class="m">750</span> /sbin/fsck
&lt;/em&gt;chmod <span class="m">750</span> /sbin/fsck_hfs
&lt;em&gt;chmod <span class="m">750</span> /sbin/fsck_msdos
&lt;/em&gt;chmod <span class="m">750</span> /sbin/halt
_chmod <span class="m">750</span> /sbin/ifconfig&lt;/p&gt;

&lt;p&gt;&lt;em&gt;chmod <span class="m">750</span> /usr/bin/lpq
&lt;/em&gt;chmod <span class="m">750</span> /usr/bin/lprm
&lt;em&gt;chmod <span class="m">4750</span> /usr/bin/lpr
&lt;/em&gt;chmod <span class="m">700</span> /usr/bin/script&lt;/p&gt;

&lt;p&gt;&lt;em&gt;chmod <span class="m">750</span> /usr/sbin/edquota
&lt;/em&gt;chmod <span class="m">2750</span> /usr/sbin/lpc
&lt;em&gt;chmod <span class="m">750</span> /usr/sbin/named
&lt;/em&gt;chmod <span class="m">750</span> /usr/sbin/nmbd
&lt;em&gt;chmod <span class="m">750</span> /usr/sbin/ntpdate
&lt;/em&gt;chmod <span class="m">750</span> /usr/sbin/ntptrace
&lt;em&gt;chmod <span class="m">750</span> /usr/sbin/pppd
&lt;/em&gt;chmod <span class="m">750</span> /usr/sbin/rpcinfo
&lt;em&gt;chmod <span class="m">750</span> /usr/sbin/smbd
&lt;/em&gt;chmod <span class="m">750</span> /usr/sbin/syslogd
&lt;em&gt;chmod <span class="m">750</span> /usr/sbin/tcpdchk
&lt;/em&gt;chmod <span class="m">750</span> /usr/sbin/tcpdmatch
&lt;em&gt;chmod <span class="m">750</span> /usr/sbin/tcpdump
&lt;/em&gt;chmod <span class="m">750</span> /usr/sbin/vipw</code></pre></div></p>
]]></content>
  </entry>
  
</feed>
